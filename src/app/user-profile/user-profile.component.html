<div class="main-page">
    <h1>
      My Profile!
    </h1>
    <button
      mat-raised-button
      (click)="logoutUser()"
      style="margin-right: 10px;"
      color="primary"
    >
      Log Out
    </button>
    <button
      mat-raised-button
      color="primary"
      (click)="allMovies()"
      style="margin-right: 10px;"
    >
      All Movies
    </button>
    <button
      mat-raised-button
      (click)="deleteUser()"
      style="margin-right: 10px;"
      color="primary"
    >
      Delete User
    </button>
</div>

<div>
    <mat-card>
        <mat-card-header>
            <mat-card-title>Edit User</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <form>
                <mat-form-field>
                    <input
                        matInput
                        [(ngModel)]="userData.username"
                        placeholder="Username"
                        type="text"
                        name="Username"
                        required
                    />
                </mat-form-field>
                <mat-form-field>
                    <input
                        matInput
                        [(ngModel)]="userData.password"
                        type="password"
                        placeholder="Password"
                        name="Password"
                        required
                    />
                </mat-form-field>
                <mat-form-field>
                    <input
                        matInput
                        [(ngModel)]="userData.email"
                        type="email"
                        placeholder="Email"
                        name="Email"
                        required
                    />
                </mat-form-field>
                <mat-form-field>
                    <input
                        matInput
                        [(ngModel)]="userData.birthday"
                        type="date"
                        placeholder="Birthday"  
                        name="Birthday"
                    />
                </mat-form-field>
            </form>
        </mat-card-content>
        <mat-card-actions>
            <button
                mat-raised-button
                (click)="editUser()"
                color="primary"
            >
                Update User
            </button>
        </mat-card-actions>
    </mat-card>
</div>

<div>
    <h3>Favorite Movies</h3>
    <div *ngIf="favoriteMovies.length > 0; else noFavorites">
        <mat-card *ngFor="let movie of favoriteMovies" style="flex: 1 1 auto;">
            <mat-card-header>
                <mat-card-title>{{ movie.title }}</mat-card-title>
                <mat-card-subtitle>Directed by: {{ movie.director.Name }}</mat-card-subtitle>
            </mat-card-header>
            <img src="{{ movie.imagePath }}" alt="{{ movie.title }}" />
            <mat-card-actions>
                <button
                    mat-button
                    color="primary"
                    (click)="showGenreAlert(movie.genre.Description)"
                >
                    Genre
                </button>
                <button
                    mat-button
                    color="primary"
                    (click)="showDirectorAlert(movie.director.Bio)"
                >
                    Director
                </button>
                <button
                    mat-button
                    color="primary"
                    (click)="showSynopsisAlert(movie.description)"
                >
                    Synopsis
                </button>
                
            </mat-card-actions>
        </mat-card>
    </div>
    <ng-template #noFavorites>
        <p>No favorite movies found.</p>
    </ng-template>
</div>
